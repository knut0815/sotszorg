function drawBuildingYearLine(t,e){var a=zorginstellingenTilburg.filter(function(t){return t.bouwjaar>1950}),r=1985,i=1992,l=1999,n=d3.scale.linear().range([0,e]).domain(d3.extent(a,function(t){return t.bouwjaar})).nice(),o=d3.svg.axis().orient("bottom").ticks(6,",d").tickFormat(d3.format("d")).scale(n);t.append("g").attr("class","x axis").attr("transform","translate(0,40)").call(o);var s=d3.scale.sqrt().range([0,20]).domain([0,d3.max(a,function(t){return t.ZZP_totaal})]);if(t.append("rect").attr("width",n(r)+1).attr("height",100).attr("x",0).attr("y",-60).style("opacity",.05).style("fill","#81BC00"),t.append("rect").attr("width",n(i)-n(r)+1).attr("height",100).attr("x",n(r)).attr("y",-60).style("opacity",.3).style("fill","#81BC00"),t.append("rect").attr("width",n(l)-n(i)+1).attr("height",100).attr("x",n(i)).attr("y",-60).style("opacity",.5).style("fill","#81BC00"),t.append("rect").attr("width",e-n(l)).attr("height",100).attr("x",n(l)).attr("y",-60).style("opacity",.1).style("fill","#81BC00"),t.append("text").attr("x",e/2).attr("y",-70).style("text-anchor","middle").style("font-size","13px").style("fill","#A8A8A8").text("Kans op transformeerbaarheid"),t.append("text").attr("x",n(r)/2).attr("y",-40).style("text-anchor","middle").style("font-size","11px").style("fill","#4d7000").text("2%"),t.append("text").attr("x",n(r)+(n(i)-n(r))/2).attr("y",-40).style("text-anchor","middle").style("font-size","11px").style("fill","#4d7000").text("20%"),t.append("text").attr("x",n(i)+(n(l)-n(i))/2).attr("y",-40).style("text-anchor","middle").style("font-size","11px").style("fill","#4d7000").text("50%"),t.append("text").attr("x",n(l)+(e-n(l))/2).attr("y",-40).style("text-anchor","middle").style("font-size","11px").style("fill","#4d7000").text("5%"),t.selectAll(".circle_zorgkantoren").data(a).enter().append("circle").attr("class","circle_zorgkantoren").style("opacity",.8).style("fill",function(t){return t.bouwjaar>=r&t.bouwjaar<=l?"#81BC00":"#BEBEBE"}).attr("cx",function(t){return n(t.bouwjaar)}).attr("cy",0).attr("r",function(t){return s(t.ZZP_totaal)}).on("mouseover",function(t){showBuildingNameTooltip.call(this,t)}).on("mouseout",function(){removeBuildingNameTooltip()}),t.append("g").append("text").attr("class","x axis label").attr("text-anchor","middle").attr("transform","translate("+e/2+",75)").style("font-size","10px").text("Bouwjaar"),!mobileScreen){var g=t.append("g").attr("class","legendWrapper").attr("transform","translate("+(e+150)+",-30)");bubbleLegend(g,s,legendSizes=[300,150,50],legendName="Aantal plaatsen per locatie");var p=t.append("g").attr("class","legendWrapper").attr("transform","translate("+(e+60)+",-30)");p.append("text").attr("class","legendTitle").attr("transform","translate(0,-25)").attr("x","0px").attr("y","0px").attr("dy","1em").text("Elke cirkel is een zorglocatie").call(wrap,90),p.append("circle").attr("r",s(300)).attr("class","legendCircle").attr("cx",0).attr("cy",s(300)+10)}}function removeBuildingNameTooltip(){$(".popover").each(function(){$(this).remove()})}function showBuildingNameTooltip(t){$(this).popover({placement:"auto top",container:".dataresource.tilburg.year",trigger:"manual",html:!0,content:function(){return"<span style='font-size: 11px;'>"+t.instellingNaam+"</span>"}}),$(this).popover("show")}var lineTilburgMargin={left:mobileScreen?30:200,top:30,right:mobileScreen?30:200,bottom:30},lineTilburgWidth=Math.min($(".dataresource.tilburg.year").width(),900)-lineTilburgMargin.left-lineTilburgMargin.right,lineTilburgHeight=150,svgLineTilburg=d3.select(".dataresource.tilburg.year").append("svg").attr("width",lineTilburgWidth+lineTilburgMargin.left+lineTilburgMargin.right).attr("height",lineTilburgHeight+lineTilburgMargin.top+lineTilburgMargin.bottom),lineTilburg=svgLineTilburg.append("g").attr("class","scatter").attr("transform","translate("+lineTilburgMargin.left+","+(lineTilburgMargin.top+lineTilburgHeight/2)+")");drawBuildingYearLine(lineTilburg,lineTilburgWidth,lineTilburgHeight,lineTilburgMargin);